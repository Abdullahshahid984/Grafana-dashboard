---

# Select Resources to Restore (Detailed Explanation)

This screen allows you to choose exactly which resources from the backup will be restored and where they will be restored in the target AKS cluster.

---

# Namespaces

Use this dropdown to select which namespaces you want to restore.

Options include:

* All namespaces that were backed up
* A subset of namespaces
* A single namespace

When you choose a namespace, the restore wizard loads only the resources belonging to that namespace.

---

# Additional Resource Settings

This section allows you to select specific types of Kubernetes resources to restore.

Examples:

* Deployments
* StatefulSets
* ConfigMaps
* Secrets
* PersistentVolumeClaims
* Services
* CRDs

If not modified, Azure Backup restores everything included in the backup for the selected namespaces.

---

# Namespace Mapping

Namespace mapping defines where the resources will be restored in the target cluster.

It lets you map:

Backed up namespace → Target namespace

You can:

1. Restore into the same namespace
2. Restore into a different namespace
3. Create a new namespace during restore

For each backed-up namespace:

* Select the backed-up namespace from the dropdown
* Enter the target namespace name
  (If the namespace does not exist, Azure Backup will create it)

Examples:

Backed up namespace: prod
Target namespace: prod

Backed up namespace: prod
Target namespace: prod-restore-test

---

# Conflict Handling

This defines what happens if resources already exist in the target namespace.

Two options:

1. Overwrite

   * Existing resources are replaced by the version from backup.

2. Skip

   * Existing resources are left unchanged.
   * Only missing resources are created.

Choose Overwrite if restoring production, or Skip if doing a test restore.

---

# Restore Hooks (Preview)

Allows running commands inside pods during restore.

Types of hooks:

* Pre-restore hook: runs before resources are restored
* Post-restore hook: runs after restore is complete

Useful for databases or applications that must be paused or validated during restore.

If not needed, leave disabled.

---

# Resource Modifier Rules

Allows you to apply automated changes to restored resources.

Examples:

* Modify labels
* Update annotations
* Patch spec fields
* Adjust resource limits

This is optional and normally used in scenarios like cross-environment restore (prod → dev).

---

# Final Action on This Screen

Once the namespace selection, resource selection, and mapping are complete:

1. Review all settings
2. Click **OK**
3. Proceed to **Review + restore**
4. Click **Restore** to start the operation

---
